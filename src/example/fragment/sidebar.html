<style type="text/css">
/*#wrapper {
    position: absolute;
    z-index: 1;
    top: 45px;
    bottom: 48px;
    left: 0;
    width: 100%;
    background: #ccc;
    overflow: hidden;
}

#scroller {
    position: absolute;
    z-index: 1;
    -webkit-tap-highlight-color: rgba(0,0,0,0);
    width: 100%;
    -webkit-transform: translateZ(0);
    -moz-transform: translateZ(0);
    -ms-transform: translateZ(0);
    -o-transform: translateZ(0);
    transform: translateZ(0);
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    -webkit-text-size-adjust: none;
    -moz-text-size-adjust: none;
    -ms-text-size-adjust: none;
    -o-text-size-adjust: none;
    text-size-adjust: none;
}*/
</style>
<div class="page__bd">
    <div class="weui-sidebar-new" id="wrapper">
        <ul id="scroller">
            <li class="weui-sidebar__item " data-scrolltop="0">
                选项1
            </li>
            <li class="weui-sidebar__item " data-scrolltop="0">
                选项2
            </li>
            <li class="weui-sidebar__item " data-scrolltop="0">
                选项3
            </li>
            <li class="weui-sidebar__item " data-scrolltop="0">
                选项4
            </li>
            <li class="weui-sidebar__item " data-scrolltop="0">
                选项5
            </li>
            <li class="weui-sidebar__item " data-scrolltop="0">
                选项6
            </li>
            <li class="weui-sidebar__item " data-scrolltop="0">
                选项7
            </li>
            <li class="weui-sidebar__item " data-scrolltop="0">
                选项8
            </li>
            <li class="weui-sidebar__item " data-scrolltop="0">
                选项9
            </li>
            <li class="weui-sidebar__item " data-scrolltop="0">
                选项10
            </li>
            <li class="weui-sidebar__item " data-scrolltop="0">
                选项11
            </li>
            <li class="weui-sidebar__item " data-scrolltop="0">
                选项12
            </li>
            <li class="weui-sidebar__item " data-scrolltop="0">
                选项13
            </li>
            <li class="weui-sidebar__item " data-scrolltop="0">
                选项14
            </li>
            <li class="weui-sidebar__item " data-scrolltop="0">
                选项15
            </li>
            <li class="weui-sidebar__item " data-scrolltop="0">
                选项16
            </li>
        </ul>
    </div>
    <div class="weui-tab__panel" id="tab_wrapper">
        <ul class="demo-data-ul" id="tab_scroller">
            <li>demo weui li</li>
            <li>demo weui li</li>
            <li>demo weui li</li>
            <li>demo weui li</li>
            <li>demo weui li</li>
            <li>demo weui li</li>
            <li>demo weui li</li>
            <li>demo weui li</li>
            <li>demo weui li</li>
            <li>demo weui li</li>
            <li>demo weui li</li>
            <li>demo weui li</li>
            <li>demo weui li</li>
            <li>demo weui li</li>
        </ul>
    </div>
</div>
<div class="page js-scroll-page hide">
    <div class="page__bd">
        <div class="weui-sidebar">
            <div class="weui-sidebar__item " data-scrolltop="0">
                选项1
            </div>
            <div class="weui-sidebar__item" data-scrolltop="200">
                选项2
            </div>
            <div class="weui-sidebar__item" data-scrolltop="600">
                选项3
            </div>
            <div class="weui-sidebar__item">
                选项4
            </div>
            <div class="weui-sidebar__item">
                选项5
            </div>
            <div class="weui-sidebar__item">
                选项6
            </div>
            <div class="weui-sidebar__item">
                选项7
            </div>
            <div class="weui-sidebar__item">
                选项8
            </div>
            <div class="weui-sidebar__item">
                选项9
            </div>
            <div class="weui-sidebar__item">
                选项10
            </div>
            <div class="weui-sidebar__item">
                选项11
            </div>
            <div class="weui-sidebar__item">
                选项12
            </div>
            <div class="weui-sidebar__item">
                选项13
            </div>
            <div class="weui-sidebar__item">
                选项14
            </div>
            <div class="weui-sidebar__item">
                选项15
            </div>
        </div>
        <div class="weui-tab__panel" style="height:1800px;">
            demo weui
        </div>
    </div>
</div>
<script type="text/javascript">
    $(function(){
        $('.weui-sidebar__item').on('click', function () {
            $(this).addClass('weui-bar__item_on').siblings('.weui-bar__item_on').removeClass('weui-bar__item_on');
            // 定位滚动
            var to = $(this).data('scrolltop');
            to = to ? parseInt(to) : 0;
            smoothScroll($('.js-scroll-page'), to, 200);
        });

        window.scrollerHeight = $('#scroller').height();
        window.scrollerHeightTab = $('#tab_scroller').height();

        var initScroll = function () {            
            var target = $("#scroller")[0];
            //给element注入transform属性
            Transform(target);
            var at=new AlloyTouch({
                touch:"#wrapper",//反馈触摸的dom
                vertical: true,//不必需，默认是true代表监听竖直方向touch
                target: target, //运动的对象
                property: "translateY",  //被滚动的属性
                sensitivity: 1,//不必需,触摸区域的灵敏度，默认值为1，可以为负数
                factor: 1,//不必需,默认值是1代表touch区域的1px的对应target.y的1
                min: window.innerHeight - window.scrollerHeight, //不必需,滚动属性的最小值
                max: 0, //不必需,滚动属性的最大值
                step: 40,
                animationEnd: function (value) {
                    // console.log(value);
                }
            });
            
            target = $("#tab_scroller")[0];
            //给element注入transform属性
            Transform(target);
            var bt=new AlloyTouch({
                touch:"#tab_wrapper",//反馈触摸的dom
                vertical: true,//不必需，默认是true代表监听竖直方向touch
                target: target, //运动的对象
                property: "translateY",  //被滚动的属性
                sensitivity: 1,//不必需,触摸区域的灵敏度，默认值为1，可以为负数
                factor: 1,//不必需,默认值是1代表touch区域的1px的对应target.y的1
                min: window.innerHeight - window.scrollerHeightTab, //不必需,滚动属性的最小值
                max: 0, //不必需,滚动属性的最大值
                step: 40,
                animationEnd: function (value) {
                    // console.log(value);
                }
            });
        }
        initScroll();
    });
    function smoothScroll(el, to, duration) {
        if (duration < 0) {
            return;
        }
        var difference = to - el.scrollTop();
        var perTick = difference / duration * 10;
        this.scrollToTimerCache = setTimeout(function() {
            if (!isNaN(parseInt(perTick, 10))) {
                el.scrollTop(el.scrollTop() + perTick)
                smoothScroll(el, to, duration - 10);
            }
        }.bind(this), 10);
    }
</script>